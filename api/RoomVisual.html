<h1 id="RoomVisual"><a href="#RoomVisual" class="headerlink" title="RoomVisual"></a>RoomVisual</h1><p><img align="right" src="img/visual.png"></p>
<p>æˆ¿é—´è§†è§‰æ•ˆæœæä¾›äº†åœ¨æ¸¸æˆæˆ¿é—´ä¸­æ˜¾ç¤ºå¯è§†åŒ–è°ƒè¯•ä¿¡æ¯çš„é€”å¾„ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>RoomVisual</code> å¯¹è±¡ç»˜åˆ¶ä¸€ä¸ªä»…å¯¹æ‚¨å¯è§çš„ç®€å•å›¾å½¢ã€‚æ¯ä¸€ä¸ªå·²å­˜åœ¨çš„ <code>Room</code> å¯¹è±¡éƒ½åŒ…å«æœ‰ <a href="#Room.visual"><code>visual</code></a> å±æ€§ï¼Œä¸è¿‡æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="#RoomVisual.constructor">constructor</a> ç»™ä»»ä½•æˆ¿é—´åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>RoomVisual</code> å¯¹è±¡ï¼ˆå³ä½¿æ²¡æœ‰è§†é‡ï¼‰ã€‚</p>
<p>æˆ¿é—´è§†è§‰æ•ˆæœå¹¶ä¸ä¼šå‚¨å­˜åœ¨æ•°æ®åº“é‡Œï¼Œå®ƒä»¬çš„ç›®çš„ä»…ä»…æ˜¯åœ¨æ‚¨çš„æµè§ˆçª—å£é‡Œæ˜¾ç¤ºä¸€äº›ä¸œè¥¿ã€‚æ‰€æœ‰ç»˜åˆ¶çš„å›¾å½¢åªä¼šä¿ç•™ 1 tickï¼Œå¦‚æœåç»­æ²¡æœ‰æ›´æ–°çš„è¯å°±ä¼šæ¶ˆå¤±ã€‚æ‰€æœ‰çš„ <code>RoomVisual</code> API è°ƒç”¨éƒ½ä¸ä¼šäº§ç”Ÿ CPU æ¶ˆè€—ï¼ˆåªä¼šäº§ç”Ÿä¸€äº›ä»£ç æ‰§è¡Œçš„è‡ªç„¶æˆæœ¬ï¼Œå¹¶ä¸”å¤§å¤šä¸ç®€å•çš„ <code>JSON.serialize</code> è°ƒç”¨æœ‰å…³ï¼‰ã€‚ç„¶è€Œï¼Œè¿™é‡Œæœ‰ä¸€äº›ä½¿ç”¨é™åˆ¶ï¼šæ‚¨æœ€å¤šåªèƒ½ä¸ºæ¯ä¸ªæˆ¿é—´å‘å¸ƒ 500 KB çš„åºåˆ—åŒ–æ•°æ®ï¼ˆè¯¦è§ <a href="#RoomVisual.getSize"><code>getSize</code></a> æ–¹æ³•ï¼‰ã€‚</p>
<p>æ‰€æœ‰çš„ç»˜åˆ¶åæ ‡å‡ç­‰åŒäºæ¸¸æˆåæ ‡ï¼Œå¹¶ä¸”ä»¥åœ°å—çš„ä¸­å¿ƒä¸ºåŸç‚¹ï¼Œå³ï¼š(10, 10) å°†æŒ‡å‘ä½äº <code>x:10; y:10</code> å¤„ creep çš„ä¸­å¿ƒã€‚å…è®¸ä½¿ç”¨å°æ•°åæ ‡ã€‚</p>
<h2 id="RoomVisual.constructor" class="api-property   "><span class="api-property__name">constructor</span><span class="api-property__args">([roomName])</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code>Game<span class="token punctuation">.</span>rooms<span class="token punctuation">[</span><span class="token string">'W10N10'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰åŒäºï¼š</span>
<span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W10N10'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="highlight javascript tab-javascript "><code><span class="token comment">// æ‰€æœ‰æˆ¿é—´éƒ½ä¼šæ˜¾ç¤ºè¯¥æ–‡æœ¬ï¼š</span>
<span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'Some text'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>align<span class="token punctuation">:</span> <span class="token string">'left'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><p>æ‚¨å¯ä»¥ç›´æ¥ä¸ºä»»ä½•æˆ¿é—´åˆ›å»º <code>RoomVisual</code> å¯¹è±¡ï¼Œå³ä½¿æ‚¨çš„è„šæœ¬æ²¡æœ‰è¯¥æˆ¿é—´çš„è§†é‡ã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>roomName (å¯é€‰)</code></td><td>string</td><td><p>æˆ¿é—´çš„åç§°ã€‚å¦‚æœæœªå®šä¹‰ï¼Œåˆ™è¯¥æ•ˆæœå°†å‘å¸ƒåˆ°æ‰€æœ‰æˆ¿é—´ã€‚</p>
</td>
</tr></tbody></table>

<h2 id="RoomVisual.roomName" class="api-property api-property--property  "><span class="api-property__name">roomName</span><span class="api-property__type">string</span></h2>
<p>æˆ¿é—´çš„åç§°ã€‚</p>
<h2 id="RoomVisual.line" class="api-property api-property--method  "><span class="api-property__name">line</span><span class="api-property__args">(x1, y1, x2, y2, [style])<br>(pos1, pos2, [style])</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="highlight javascript tab-javascript "><code>creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">line</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>pos<span class="token punctuation">,</span> target<span class="token punctuation">.</span>pos<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> lineStyle<span class="token punctuation">:</span> <span class="token string">'dashed'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»˜åˆ¶ä¸€æ¡çº¿ã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>x1</code></td><td>number</td><td><p>èµ·å§‹ç‚¹çš„ X åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>y1</code></td><td>number</td><td><p>èµ·å§‹ç‚¹çš„ Y åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>x2</code></td><td>number</td><td><p>ç»“æŸç‚¹çš„ X åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>y2</code></td><td>number</td><td><p>ç»“æŸç‚¹çš„ Y åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>pos1</code></td><td><a href="#RoomPosition">RoomPosition</a></td><td><p>èµ·å§‹ç‚¹ä½ç½®å¯¹è±¡ã€‚</p>
</td>
</tr><tr><td><code>pos2</code></td><td><a href="#RoomPosition">RoomPosition</a></td><td><p>ç»“æŸç‚¹ä½ç½®å¯¹è±¡ã€‚</p>
</td>
</tr><tr><td><code>style (å¯é€‰)</code></td><td>object</td><td><p>åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ï¼š</p>
<ul>
    <li>
        <div class="api-arg-title">width</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">çº¿æ¡çš„å®½åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.1ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">color</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc">çº¿æ¡é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º <code>#ffffff</code> (ç™½è‰²)ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">opacity</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">é€æ˜åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.5ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">lineStyle</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc"><code>undefined</code> (å®çº¿)ï¼Œ<code>dashed</code> (è™šçº¿) æˆ–è€… <code>dotted</code> (ç‚¹çº¿) ä¹‹ä¸€ã€‚é»˜è®¤å€¼ä¸º undefinedã€‚</div>
    </li>
</ul></td>
</tr></tbody></table>

<h3 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è¯¥
<code>RoomVisual</code>
å¯¹è±¡æœ¬èº«ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="RoomVisual.circle" class="api-property api-property--method  "><span class="api-property__name">circle</span><span class="api-property__args">(x, y, [style])<br>(pos, [style])</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="highlight javascript tab-javascript "><code>creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>pos<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>fill<span class="token punctuation">:</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span> radius<span class="token punctuation">:</span> <span class="token number">0.55</span><span class="token punctuation">,</span> stroke<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»˜åˆ¶ä¸€ä¸ªåœ†ã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>x</code></td><td>number</td><td><p>åœ†å¿ƒçš„ X åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>y</code></td><td>number</td><td><p>åœ†å¿ƒçš„ Y åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>pos</code></td><td><a href="#RoomPosition">RoomPosition</a></td><td><p>åœ†å¿ƒçš„ä½ç½®å¯¹è±¡ã€‚</p>
</td>
</tr><tr><td><code>style (å¯é€‰)</code></td><td>object</td><td><p>åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ï¼š</p>
<ul>
    <li>
        <div class="api-arg-title">radius</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">åœ†çš„åŠå¾„ï¼Œé»˜è®¤å€¼ä¸º 0.15ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">fill</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc">å¡«å……é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º <code>#ffffff</code> (ç™½è‰²)ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">opacity</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">é€æ˜åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.5ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">stroke</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc">è½®å»“é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤æœªå®šä¹‰ï¼ˆæ²¡æœ‰è½®å»“ï¼‰ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">strokeWidth</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">è½®å»“å®½åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.1ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">lineStyle</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc"><code>undefined</code> (å®çº¿)ï¼Œ<code>dashed</code> (è™šçº¿) æˆ–è€… <code>dotted</code> (ç‚¹çº¿) ä¹‹ä¸€ã€‚é»˜è®¤å€¼ä¸º undefinedã€‚</div>
    </li>
</ul></td>
</tr></tbody></table>

<h3 id="è¿”å›å€¼-1"><a href="#è¿”å›å€¼-1" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è¯¥
<code>RoomVisual</code>
å¯¹è±¡æœ¬èº«ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="RoomVisual.rect" class="api-property api-property--method  "><span class="api-property__name">rect</span><span class="api-property__args">(x, y, width, height, [style])<br>(topLeftPos, width, height, [style])</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token comment">// ä» (2,2) åˆ° (10,10) çš„ 9x9 åŒºåŸŸ</span>
<span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><pre class="highlight javascript tab-javascript "><code><span class="token comment">// creep ä¸Šçš„çŸ©å½¢è¾¹æ¡†</span>
creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">0.6</span><span class="token punctuation">,</span> creep<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">0.6</span><span class="token punctuation">,</span> 
    <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>fill<span class="token punctuation">:</span> <span class="token string">'transparent'</span><span class="token punctuation">,</span> stroke<span class="token punctuation">:</span> <span class="token string">'#f00'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>x</code></td><td>number</td><td><p>å·¦ä¸Šè§’çš„ X åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>y</code></td><td>number</td><td><p>å·¦ä¸Šè§’çš„ Y åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>topLeftPos</code></td><td><a href="#RoomPosition">RoomPosition</a></td><td><p>å·¦ä¸Šè§’çš„ä½ç½®å¯¹è±¡ã€‚</p>
</td>
</tr><tr><td><code>width</code></td><td>number</td><td><p>çŸ©å½¢çš„å®½åº¦ã€‚</p>
</td>
</tr><tr><td><code>height</code></td><td>number</td><td><p>çŸ©å½¢çš„é«˜åº¦ã€‚</p>
</td>
</tr><tr><td><code>style (å¯é€‰)</code></td><td>object</td><td><p>åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ï¼š</p>
<ul>
    <li>
        <div class="api-arg-title">fill</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc">å¡«å……é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º <code>#ffffff</code> (ç™½è‰²)ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">opacity</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">é€æ˜åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.5ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">stroke</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc">è½®å»“é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤æœªå®šä¹‰ï¼ˆæ²¡æœ‰è½®å»“ï¼‰ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">strokeWidth</div>
        <div class="api-arg-type">number</div>
        <div class="api-arg-desc">è½®å»“å®½åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.1ã€‚</div>
    </li>
    <li>
        <div class="api-arg-title">lineStyle</div>
        <div class="api-arg-type">string</div>
        <div class="api-arg-desc"><code>undefined</code> (å®çº¿)ï¼Œ<code>dashed</code> (è™šçº¿) æˆ–è€… <code>dotted</code> (ç‚¹çº¿) ä¹‹ä¸€ã€‚é»˜è®¤å€¼ä¸º undefinedã€‚</div>
    </li>
</ul></td>
</tr></tbody></table>

<h3 id="è¿”å›å€¼-2"><a href="#è¿”å›å€¼-2" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è¯¥
<code>RoomVisual</code>
å¯¹è±¡æœ¬èº«ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="RoomVisual.poly" class="api-property api-property--method  "><span class="api-property__name">poly</span><span class="api-property__args">(points, [style])</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">const</span> points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>creep1<span class="token punctuation">.</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RoomPosition</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">poly</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> <span class="token punctuation">{</span>fill<span class="token punctuation">:</span> <span class="token string">'aqua'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><pre class="highlight javascript tab-javascript "><code><span class="token comment">// å°†è·¯å¾„å¯è§†åŒ–</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> Game<span class="token punctuation">.</span>rooms<span class="token punctuation">[</span><span class="token string">'W1N1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findPath</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">poly</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">{</span>stroke<span class="token punctuation">:</span> <span class="token string">'#fff'</span><span class="token punctuation">,</span> strokeWidth<span class="token punctuation">:</span> <span class="token number">.15</span><span class="token punctuation">,</span>
    opacity<span class="token punctuation">:</span> <span class="token number">.2</span><span class="token punctuation">,</span> lineStyle<span class="token punctuation">:</span> <span class="token string">'dashed'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><p>ç»˜åˆ¶ä¸€æ¡æŠ˜çº¿ã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>points</code></td><td>array</td><td><p>æŠ˜ç‚¹æ•°ç»„ã€‚æ¯ä¸ªå…ƒç´ éƒ½åº”æ˜¯ä¸¤ä¸ªæ•°å­—çš„æ•°ç»„ï¼ˆå³ <code>[10,15]</code>ï¼‰ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª <a href="#RoomPosition"><code>RoomPosition</code></a> å¯¹è±¡ã€‚</p>
</td>
</tr><tr><td><code>style (å¯é€‰)</code></td><td>object</td><td><p>åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ï¼š
                    <ul>
                        <li>
                            <div class="api-arg-title">fill</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc">å¡«å……é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º <code>undefined</code>ï¼ˆä¸å¡«å……ï¼‰ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">opacity</div>
                            <div class="api-arg-type">number</div>
                            <div class="api-arg-desc">é€æ˜åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.5ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">stroke</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc">çº¿æ¡é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º <code>#ffffff</code> (ç™½è‰²)ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">strokeWidth</div>
                            <div class="api-arg-type">number</div>
                            <div class="api-arg-desc">çº¿æ¡å®½åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.1ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">lineStyle</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc"><code>undefined</code> (å®çº¿)ï¼Œ<code>dashed</code> (è™šçº¿) æˆ–è€… <code>dotted</code> (ç‚¹çº¿) ä¹‹ä¸€ã€‚é»˜è®¤å€¼ä¸º undefinedã€‚</div>
                        </li>
                    </ul></p>
</td>
</tr></tbody></table>

<h3 id="è¿”å›å€¼-3"><a href="#è¿”å›å€¼-3" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è¯¥
<code>RoomVisual</code>
å¯¹è±¡æœ¬èº«ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="RoomVisual.text" class="api-property api-property--method  "><span class="api-property__name">text</span><span class="api-property__args">(text, x, y, [style])<br>(text, pos, [style])</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"TargetğŸ’¥"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span> font<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </code></pre><p>ç»˜åˆ¶ä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•æœ‰æ•ˆçš„ Unicode å­—ç¬¦ï¼ŒåŒ…æ‹¬ <a href="http://unicode.org/emoji/charts/emoji-style.txt" target="_blank">emoji</a>ã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>text</code></td><td>string</td><td><p>æ–‡æœ¬ä¿¡æ¯</p>
</td>
</tr><tr><td><code>x</code></td><td>number</td><td><p>æ–‡æœ¬åŸºçº¿ï¼ˆbaselineï¼‰èµ·å§‹ç‚¹çš„ X åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>y</code></td><td>number</td><td><p>æ–‡æœ¬åŸºçº¿èµ·å§‹ç‚¹çš„ Y åæ ‡ã€‚</p>
</td>
</tr><tr><td><code>pos</code></td><td><a href="#RoomPosition">RoomPosition</a></td><td><p>æ–‡æœ¬åŸºçº¿èµ·å§‹ç‚¹çš„ä½ç½®å¯¹è±¡ã€‚</p>
</td>
</tr><tr><td><code>style (å¯é€‰)</code></td><td>object</td><td><p>åŒ…å«ä¸‹åˆ—å±æ€§çš„å¯¹è±¡ï¼š
                    <ul>
                        <li>
                            <div class="api-arg-title">color</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc">å­—ä½“é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º <code>#ffffff</code> (ç™½è‰²)ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">font</div>
                            <div class="api-arg-type">number, string</div>
                            <div class="api-arg-desc">æ•°å­—æˆ–è€…å­—ç¬¦ä¸²ï¼Œåº”ä½¿ç”¨ä¸‹åˆ—å½¢å¼ï¼š
                                <ul>
                                    <li><code>0.7</code> - åŸºäºæ¸¸æˆåæ ‡çš„ç›¸å¯¹å¤§å°</li>
                                    <li><code>20px</code> - åŸºäºåƒç´ çš„ç»å¯¹å¤§å°</li>
                                    <li><code>0.7 serif</code></li>
                                    <li><code>bold italic 1.5 Times New Roman</code></li>
                                </ul>
                            </div>
                        </li>
                        <li>
                            <div class="api-arg-title">stroke</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc">è½®å»“é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤æœªå®šä¹‰ï¼ˆæ²¡æœ‰è½®å»“ï¼‰ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">strokeWidth</div>
                            <div class="api-arg-type">number</div>
                            <div class="api-arg-desc">è½®å»“å®½åº¦ï¼Œé»˜è®¤å€¼ä¸º 0.15ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">backgroundColor</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc">èƒŒæ™¯é¢œè‰²ï¼Œå…è®¸ä½¿ç”¨ä»»ä½• web æ ¼å¼é¢œè‰²ï¼Œé»˜è®¤æœªå®šä¹‰ï¼ˆæ²¡æœ‰èƒŒæ™¯ï¼‰ã€‚å½“å¯ç”¨èƒŒæ™¯æ—¶ï¼Œæ–‡æœ¬çš„ç«–ç›´å¯¹é½æ¨¡å¼å°†è®¾ç½®ä¸º middleï¼ˆé»˜è®¤ä¸º baselineï¼‰ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">backgroundPadding</div>
                            <div class="api-arg-type">number</div>
                            <div class="api-arg-desc">èƒŒæ™¯çŸ©å½¢çš„ paddingï¼Œé»˜è®¤å€¼ä¸º 0.3ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">align</div>
                            <div class="api-arg-type">string</div>
                            <div class="api-arg-desc">æ–‡æœ¬å¯¹é½æ¨¡å¼ï¼Œ<code>center</code>ï¼Œ<code>left</code> æˆ–è€… <code>right</code> ä¹‹ä¸€ã€‚é»˜è®¤å€¼ä¸º <code>center</code>ã€‚</div>
                        </li>
                        <li>
                            <div class="api-arg-title">opacity</div>
                            <div class="api-arg-type">number</div>
                            <div class="api-arg-desc">é€æ˜åº¦ï¼Œé»˜è®¤å€¼ä¸º 1.0ã€‚</div>
                        </li>
                    </ul></p>
</td>
</tr></tbody></table>

<h3 id="è¿”å›å€¼-4"><a href="#è¿”å›å€¼-4" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è¯¥
<code>RoomVisual</code>
å¯¹è±¡æœ¬èº«ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="RoomVisual.clear" class="api-property api-property--method  "><span class="api-property__name">clear</span><span class="api-property__args">()</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">new</span> <span class="token class-name">RoomVisual</span><span class="token punctuation">(</span><span class="token string">'W1N1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç§»é™¤è¯¥æˆ¿é—´çš„æ‰€æœ‰è§†è§‰æ•ˆæœã€‚</p>
<h3 id="è¿”å›å€¼-5"><a href="#è¿”å›å€¼-5" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è¯¥
<code>RoomVisual</code>
å¯¹è±¡æœ¬èº«ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ã€‚</p>
<h2 id="RoomVisual.getSize" class="api-property api-property--method  "><span class="api-property__name">getSize</span><span class="api-property__args">()</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">512000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æœ¬ tick å°†æ— æ³•æ·»åŠ æ›´å¤šçš„è§†è§‰æ•ˆæœ</span>
<span class="token punctuation">}</span></code></pre><p>å½“å‰ tick æ·»åŠ åˆ°è¯¥æˆ¿é—´çš„è§†è§‰æ•ˆæœçš„å­˜å‚¨å¤§å°ã€‚å®ƒä¸èƒ½è¶…è¿‡ 512,000ï¼ˆ500 KBï¼‰ã€‚</p>
<h3 id="è¿”å›å€¼-6"><a href="#è¿”å›å€¼-6" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>è§†è§‰æ•ˆæœçš„å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰ã€‚</p>
<h2 id="RoomVisual.export" class="api-property api-property--method  "><span class="api-property__name">export</span><span class="api-property__args">()</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code>Memory<span class="token punctuation">.</span>RoomVisualData<span class="token punctuation">[</span><span class="token string">'E2S7'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Game<span class="token punctuation">.</span>rooms<span class="token punctuation">.</span><span class="token constant">E2S7</span><span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿”å›å½“å‰ tick ä¸­æ·»åŠ åˆ°æˆ¿é—´ä¸­çš„æ‰€æœ‰å¯è§†åŒ–æ•ˆæœçš„ç´§å‡‘æ ¼å¼ã€‚</p>
<h3 id="è¿”å›å€¼-7"><a href="#è¿”å›å€¼-7" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p>ä»£è¡¨äº†å¯è§†åŒ–æ•°æ®çš„å­—ç¬¦ä¸²ã€‚é™¤äº†å°†å…¶å­˜å‚¨ä»¥å¤‡åç»­ä½¿ç”¨å¤–ï¼Œæ‚¨ä¸åº”è¯¥å¯¹å…¶è¿›è¡Œå…¶ä»–æ“ä½œã€‚</p>
<h2 id="RoomVisual.import" class="api-property api-property--method  "><span class="api-property__name">import</span><span class="api-property__args">(val)</span>
        <div class="api-property__cpu api-property__cpu--0" title="è¯¥æ–¹æ³•çš„CPUå¼€é”€å¾ˆå°ã€‚"></div>
        </h2>
<pre class="highlight javascript tab-javascript "><code><span class="token keyword">if</span><span class="token punctuation">(</span>Memory<span class="token punctuation">.</span>RoomVisualData<span class="token punctuation">[</span><span class="token string">'E2S7'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Game<span class="token punctuation">.</span>rooms<span class="token punctuation">.</span><span class="token constant">E2S7</span><span class="token punctuation">.</span>visual<span class="token punctuation">.</span><span class="token function">import</span><span class="token punctuation">(</span>Memory<span class="token punctuation">.</span>RoomVisualData<span class="token punctuation">[</span><span class="token string">'E2S7'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>å°†å…ˆå‰å¯¼å‡ºï¼ˆä½¿ç”¨<a href="#RoomVisual.export">RoomVisual.export</a>ï¼‰çš„æˆ¿é—´å¯è§†åŒ–æ•ˆæœæ·»åŠ åˆ°å½“å‰ tickã€‚</p>
<table><thead><tr><th>parameter</th><th>type</th><th>description</th></tr></thead><tbody>
<tr><td><code>val</code></td><td>string</td><td><p>ä» RoomVisual.export è¿”å›çš„å­—ç¬¦ä¸²ã€‚</p>
</td>
</tr></tbody></table>

<h3 id="è¿”å›å€¼-8"><a href="#è¿”å›å€¼-8" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h3><p><code>RoomVisual</code> å¯¹è±¡è‡ªèº«ï¼Œä»¥ä¾¿è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚</p>
